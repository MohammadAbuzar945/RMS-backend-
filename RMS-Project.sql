
---CREATE DATABASE
CREATE DATABASE PROJECT
use PROJECT

--- CUSTOMER TABLE


CREATE TABLE CUSTOMER(
CUSTOMER_ID INT PRIMARY KEY NOT NULL,
CUSTOMER_NAME VARCHAR(30) NOT NULL,
PHONE VARCHAR(20) NOT NULL,
EMAIL VARCHAR(120) NOT NULL,

)

--EMPLOYEE TABLE
CREATE TABLE EMPLOYEES(
Emp_ID INT PRIMARY KEY NOT NULL,
EmpName  VARCHAR(20) NOT NULL ,
SSN VARCHAR(20) NOT NULL ,
Phone VARCHAR(20) NULL ,
"Address" VARCHAR(50) NULL ,
Pay INT NOT NULL ,
Email VARCHAR(120) NOT NULL ,
CUST_ID INT NOT NULL FOREIGN KEY REFERENCES CUSTOMER(CUSTOMER_ID)
)
---FOOD ITEMS TABLE 
CREATE TABLE FOODITEM(
FOOD_ID INT NOT NULL PRIMARY KEY,
FOOD_NAME VARCHAR(50) NOT NULL,
UNIT_PRICE INT NOT NULL,

)

---MENU TABLE
CREATE TABLE MENU(
ITEM_ID INT PRIMARY KEY NOT NULL,
ITEMS VARCHAR(30) NOT NULL,
PRICE INT NOT NULL,
FOOD_ID INT NOT NULL FOREIGN KEY REFERENCES FOODITEM(FOOD_ID),

)

---TABLES TABLE

CREATE TABLE TB_TABLE(
TABLE_NO INT PRIMARY KEY NOT NULL,
AVAILABILTY VARCHAR(10) NOT NULL,

)

---ORDERS TABLE
CREATE TABLE ORDERS(
ORDER_ID INT PRIMARY KEY NOT NULL,
CUSTOMER_ID INT NOT NULL FOREIGN KEY REFERENCES CUSTOMER(CUSTOMER_ID),
TABLE_NO  INT NOT NULL FOREIGN KEY REFERENCES TB_TABLE(TABLE_NO),
ITEM_ID INT NOT NULL FOREIGN KEY REFERENCES MENU(ITEM_ID),
QUANTITY INT NOT NULL,
TOTAL_PRICE INT NOT NULL,
)



---RESERVATION TABLE

CREATE TABLE RESERVATION(
RESERVATION_ID INT NOT NULL PRIMARY KEY,
EMPLOYEE_ID INT NOT NULL FOREIGN KEY REFERENCES EMPLOYEES(Emp_ID),
CUSTOMER_ID INT NOT NULL FOREIGN KEY REFERENCES CUSTOMER(CUSTOMER_ID),
DATE_APPLIED DATE NOT NULL ,
DATE_OF_SCHEDULE DATE NOT NULL,

)
---PAYMENT TABLE
CREATE TABLE PAYMENT(
PAYMENT_ID INT NOT NULL PRIMARY KEY,
ORDER_ID INT NOT NULL FOREIGN KEY REFERENCES ORDERS(ORDER_ID),
CUSTOMER_ID INT NOT NULL FOREIGN KEY REFERENCES CUSTOMER(CUSTOMER_ID),
PAYMENT_DATE DATE NOT NULL,
AMOUNT INT NOT NULL,
PAYMENT_TYPE VARCHAR(20) NOT NULL,

)


INSERT INTO CUSTOMER VALUES(100,'ZARAQ',4146088,'ZOUQAN@gmail.com'),
(101,'haris',4146088,'mehmat@gmail.com'),
(143,'Zaigham',4146088,'burak23@gmail.com'),
(178,'faiq',4146088,'alihan@gmail.com')


INSERT INTO EMPLOYEES VALUES	(002,'ABUZAR','EMP002',4813191 ,'LAHORE',20000,'abuzarmohammad945@gmail.com',100),
								(003,'TAHA','EMP003',2545689,  ' LAHORE',30000,'tahanaveed5@gmail.com',101),
								(004,'AYESHA','EMP004',7895641 ,'ISLAMABAD',60000,'ayeshaaleem@gmail.com',143),
								(005,'ARMUGHAN','EMP005',457896 ,'MULTAN',70000,'armuLA@gmail.com',178)

INSERT INTO FOODITEM VALUES    (01,'TIKKA-KABAB',500),
(02,'RASMALAI',500),
(03,'NAAN',50),
(04,'KARAHI GOSHT',900),
(05,'MUTTON',500),
(06,'COFFEE',200),
(07,'SOFT DRINK',100),
(08,'CHAI',90)

INSERT INTO MENU VALUES (22,'1',500,01),
(23,'7',600,07),
(24,'3',2000,05),
(25,'2',500,07),
(26,'1',200,06),
(27,'4',650,07)



INSERT INTO TB_TABLE VALUES (44,'YES'),
(49,'NO'),
(48,'YES'),
(47,'YES'),
(45,'NO'),
(43,'YES'),
(46,'NO')


INSERT INTO ORDERS VALUES (91,100,45,22,5,5000),
(92,101,44,23,5,6000),
(93,143,49,24,4,7000),
(94,178,47,25,2,8000),
(95,100,43,26,4,9000)

INSERT INTO PAYMENT VALUES (51,91,100,05/09/2021,2300,'CASH'),
(52,92,101,23/09/2021,2500,'CARD'),
(53,93,143,25/09/2021,3000,'CASH')


SELECT*FROM MENU
SELECT *FROM CUSTOMER
SELECT *FROM EMPLOYEES
SELECT *FROM FOODITEM
SELECT *FROM ORDERS

---Procedure to insert data into employees

GO
CREATE PROCEDURE InsertEmployees @Emp_Id nvarchar(20),@EmpName nvarchar(20)
,@SSN nvarchar(20),@Phone nvarchar(20),@Address nvarchar(30), @Pay int ,@Email nvarchar(40),
@CUST_ID nvarchar(40)
AS
INSERT INTO EMPLOYEES (Emp_ID,EmpName,SSN,Phone,"Address",Pay,Email,CUST_ID)
VALUES				  (@Emp_Id,@EmpName,@SSN,@Phone,@Address,@Pay,@Email,@CUST_ID)
GO

---VALUE INSERT
EXEC InsertEmployees 148,'Zaigham',EMP148,4641256,'Muridke batapur',50000,'zaigham07@gmail.com',100
SELECT *FROM EMPLOYEES

--Procedure for Deleting Employee
GO
CREATE PROCEDURE DelteEMP @EmpID AS INT
AS
DELETE FROM EMPLOYEES WHERE Emp_ID = @EmpID
GO
--Run delete employee proc
EXEC DelteEMP  002

SELECT *FROM EMPLOYEES

---Procedure to Insert data in Customer table
GO
CREATE PROCEDURE InsertCustomer  @CUSTOMER_ID  nvarchar(30),@CUSTOMER_NAME nvarchar(40) ,@EMAIL nvarchar(50) ,@PHONE int
AS
INSERT INTO CUSTOMER (CUSTOMER_ID,CUSTOMER_NAME,EMAIL,PHONE)
VALUES				 (@CUSTOMER_ID,@CUSTOMER_NAME,@EMAIL,@PHONE)
GO
---Insert Values

EXEC InsertCustomer 182,'YILDIZ','yildiz@gmail.com',4146088
EXEC InsertCustomer 183,'UMER','umeree@gmail.com',4146088
EXEC InsertCustomer 184,'SAQIB','saw@gmail.com',4146088
EXEC InsertCustomer 185,'SONU','sonu@gmail.com',4146088


SELECT *FROM CUSTOMER


--Procedure for Deleting CUSTOMER
GO
CREATE PROCEDURE DelteCUSTOMER @CUSTOMER_ID AS INT
AS
DELETE FROM CUSTOMER WHERE @CUSTOMER_ID= @CUSTOMER_ID
GO
---run delete customer proc
EXEC DelteCUSTOMER 143





--PROCEDURE FOR UPDATING PRICE OF AN ITEM
GO
Create PROCEDURE INSERTMENUPrice @ITEM_ID INT, @PRICE int
AS
UPDATE MENU
SET @PRICE = @PRICE
WHERE @ITEM_ID = @ITEM_ID
GO

EXEC INSERTMENUPrice 22,1500

SELECT *FROM MENU


--Procedure for Searching Customer's information
GO
CREATE PROCEDURE SearchCustmerInfo @CUSTOMER_NAME nvarchar(40)
AS
SELECT * FROM CUSTOMER WHERE CUSTOMER_NAME = @CUSTOMER_NAME

GO
---searxh in database 
EXEC SearchCustmerInfo 'umer'



--- PROCEDURE TO INSERT VALUES IN  MENU
GO
CREATE PROCEDURE INSERTintoMENU @ITEM_ID nvarchar(20) ,@ITEMS nvarchar(20) ,@PRICE int ,@FOOD_ID int
AS 
INSERT INTO MENU (ITEM_ID,ITEMS,PRICE,FOOD_ID)
VALUES           (@ITEM_ID,@ITEMS,@PRICE,@FOOD_ID)

GO

EXEC INSERTintoMENU 47,7,2500,03
EXEC INSERTintoMENU 48,3,2600,04
EXEC INSERTintoMENU 49,3,500,05
EXEC INSERTintoMENU 44,2,2400,07
EXEC INSERTintoMENU 42,6,600,06
EXEC INSERTintoMENU 43,5,200,07
EXEC INSERTintoMENU 45,4,500,02

SELECT *FROM MENU

---QUERY TO DISPLAY WHICH EMPLOYEE SERVE TO WHICH CUSTOMER
SELECT CUSTOMER.CUSTOMER_NAME , EMPLOYEES.EmpName
FROM   CUSTOMER , EMPLOYEES 
WHERE  CUSTOMER.CUSTOMER_ID=EMPLOYEES.CUST_ID

---HIGHEST PAID EMOLOYESS
SELECT EMPLOYEES.Emp_ID,EMPLOYEES.EmpName,EMPLOYEES.Pay
FROM EMPLOYEES
WHERE Pay>20000

---CUSTOMER WHO ORDERS GREATER THAN 1 NUMBER OF QUANTITY  AND ALSO THAT EMPLOYEE WHO SERVED
SELECT ORDERS.CUSTOMER_ID , EMPLOYEES.EmpName, CUSTOMER.CUSTOMER_NAME
FROM ORDERS,CUSTOMER,EMPLOYEES
WHERE ORDERS.QUANTITY>3

















































